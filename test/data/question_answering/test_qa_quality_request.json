{
  "contents": [
    {
      "role": "user",
      "parts": [
        {
          "text": "# Instruction\nYou are an expert evaluator. Your task is to evaluate the quality of the responses generated by AI models.\nWe will provide you with the user prompt and an AI-generated responses.\nYou should first read the user prompt carefully for analyzing the task, and then evaluate the quality of the responses based on and rules provided in the Evaluation section below.\n\n# Evaluation\n## Metric Definition\nYou will be assessing question answering quality, which measures the overall quality of the answer to the question in user prompt. Pay special attention to length constraints, such as in X words or in Y sentences. The instruction for performing a question-answering task is provided in the user prompt. The response should not contain information that is not present in the context (if it is provided).\n\nYou will assign the writing response a score from 5, 4, 3, 2, 1, following the Rating Rubric and Evaluation Steps.\nGive step-by-step explanations for your scoring, and only choose scores from 5, 4, 3, 2, 1.\n\n## Criteria Definition\nInstruction following: The response demonstrates a clear understanding of the question answering task instructions, satisfying all of the instruction's requirements.\nGroundedness: The response contains information included only in the context if the context is present in user prompt. The response does not reference any outside information.\nCompleteness: The response completely answers the question with suffient detail.\nFluent: The response is well-organized and easy to read.\n\n## Rating Rubric\n5: (Very good). The answer follows instructions, is grounded, complete, and fluent.\n4: (Good). The answer follows instructions, is grounded, complete, but is not very fluent.\n3: (Ok). The answer mostly follows instructions, is grounded, answers the question partially and is not very fluent.\n2: (Bad). The answer does not follow the instructions very well, is incomplete or not fully grounded.\n1: (Very bad). The answer does not follow the instructions, is wrong and not grounded.\n\n## Evaluation Steps\nSTEP 1: Assess the response in aspects of instruction following, groundedness, completeness, and fluency according to the criteria.\nSTEP 2: Score based on the rubric.\nReturn result in JSON format. example output: { 'rating': 2 , evaluation: 'reason'}\n\n# User Inputs and AI-generated Response\n## User Inputs\n### Prompt\nGiven the attached document, generate a question and an answer.The question should only be sourced from the provided the document. Do not use any other information other than the attached document. Explain your reasoning for the answer by quoting verbatim where in the document the answer is found. Return the results in JSON format.Example: {'question': 'Here is a question?', 'answer': 'Here is the answer', 'reasoning': 'Quote from document'}\n\nYou are an expert in reading call center policy and procedure documents. Generate question and answer a customer would ask from a Bank using the attached document. ## AI-generated Response\n\nMarkdown\n\n{\n \"question\": \"What are the circumstances under which Gemini Bank will consider a refund for overdraft fees?\",\n \"answer\": \"Gemini Bank may consider an overdraft fee refund for situations beyond the customer's control, such as documented bank errors, authorization issues with legitimate transactions, or unexpected delays in receiving a deposit critical to avoid the overdraft. \",\n \"reasoning\": \"The document states: \"Extenuating Circumstances: We will consider fee refunds for extenuating circumstances beyond the customer's control, such as documented bank errors, authorization issues with legitimate transactions, or unexpected delays in receiving a deposit critical to avoid the overdraft.\"\"\n}"
        },
        {
          "fileData": {
            "mimeType": "application/pdf",
            "fileUri": "gs://argolis-arau-gemini-bank/Procedure - Overdraft Fee Refunds.pdf"
          }
        }
      ]
    }
  ],
  "generationConfig": {
    "maxOutputTokens": 8192,
    "temperature": 1,
    "topP": 0.95,
    "response_mime_type": "application/json"
  },
  "safetySettings": [
    {
      "category": "HARM_CATEGORY_HATE_SPEECH",
      "threshold": "BLOCK_MEDIUM_AND_ABOVE"
    },
    {
      "category": "HARM_CATEGORY_DANGEROUS_CONTENT",
      "threshold": "BLOCK_MEDIUM_AND_ABOVE"
    },
    {
      "category": "HARM_CATEGORY_SEXUALLY_EXPLICIT",
      "threshold": "BLOCK_MEDIUM_AND_ABOVE"
    },
    {
      "category": "HARM_CATEGORY_HARASSMENT",
      "threshold": "BLOCK_MEDIUM_AND_ABOVE"
    }
  ]
}
